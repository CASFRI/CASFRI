rule_id,target_attribute,target_attribute_type,validation_rules,translation_rules,description,desc_uptodate_with_rules
1,CAS_ID,text,notEmpty(inventory_id);notEmpty(src_filename);notNull(map_sheet_id);notNull(orig_stand_id);notNull(ogc_fid),"padConcat({inventory_id, src_filename, map_sheet_id, orig_stand_id, ogc_fid}, {4,15,10,10,7}, {'x','x','x','x','x'}, '-', TRUE, TRUE)",Concatenates five attributes to create CAS_ID,TRUE
2,INVENTORY_ID,text,notEmpty(inventory_id),copyText(inventory_id),Copies source value,TRUE
3,ORIG_STAND_ID,text,notNull(orig_stand_id),copyText(orig_stand_id),Copies source value,TRUE
4,STAND_STRUCTURE,text,"fvi01_stand_structure_validation(stand_structure, typeclas_layer1, typeclas_layer2, species_1_layer1, species_2_layer1, species_3_layer1, species_1_layer2, species_2_layer2, species_3_layer2)","fvi01_stand_structure_translation(stand_structure, typeclas_layer1, typeclas_layer2, species_1_layer1, species_2_layer1, species_3_layer1, species_1_layer2, species_2_layer2, species_3_layer2)","Validation returns NOT_APPLICABLE if row has no species info and is not Horizontal. Translation returns HORIZONTAL or COMPLEX, SINGLE_LAYERED if one forest layer, MULTI_LAYERED if two forest layers. Source stand structure counted NFL layers as forest layers, CASFRI does not. Note that many rows indicate horizontal structure but only have values for one layer. Any rows with NFL values are excluded from stand structure calculation, some nfl rows do have species assigned but we don`t want to double count them so they are dropped from all LYR related attributes.",TRUE
5,NUM_OF_LAYERS,integer,"fvi01_hasCountOfNotNull({species_1_layer1, species_2_layer1, species_3_layer1, species_4_layer1}, {species_1_layer2, species_2_layer2, species_3_layer2, species_4_layer2}, typeclas_layer1, typeclas_layer2, 1, FALSE|-8886)","fvi01_countOfNotNull({species_1_layer1, species_2_layer1, species_3_layer1, species_4_layer1}, {species_1_layer2, species_2_layer2, species_3_layer2, species_4_layer2}, typeclas_layer1, typeclas_layer2, 4)","Count number of layers using custom function. Counts layer 1 if typeclass is forested (i.e. not an nfl code) and species 1, 2, 3 or 4 is present. Counts layer 2 if mintypeclass is forested and species 1, 2, 3 or 4 is present. Counts layer 1 and layer 2 nfl if nfl codes is present.",TRUE
6,MAP_SHEET_ID,text,false(),nothingText(),Attribute does not occur,TRUE
7,CASFRI_AREA,double precision,"geoIsValid(wkb_geometry, TRUE|-8888)",geoArea(wkb_geometry),Validates geometry then calculates area,TRUE
8,CASFRI_PERIMETER,double precision,"geoIsValid(wkb_geometry, TRUE|-8888)",geoPerimeter(wkb_geometry),Validates geometry then calculates perimeter,TRUE
9,SRC_INV_AREA,double precision,"notNull(src_inv_area);isNumeric(src_inv_area);isGreaterThan(src_inv_area,0, FALSE)",copyDouble(src_inv_area),Copies source value to SRC_INV_AREA. Return OUT_OF_RANGE for any zero values.,TRUE
10,STAND_PHOTO_YEAR,integer,"notNull(stand_photo_year);isInt(stand_photo_year);isBetween(stand_photo_year, 1900, 2020)",copyInt(stand_photo_year),Copies source value to STAND_PHOTO_YEAR,TRUE
