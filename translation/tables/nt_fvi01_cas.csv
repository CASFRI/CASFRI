rule_id,target_attribute,target_attribute_type,validation_rules,translation_rules,description,desc_uptodate_with_rules
1,CAS_ID,text,notEmpty(inventory_id);notNull(src_filename);notNull(map_sheet_id);notNull(orig_stand_id);notNull(ogc_fid),"padConcat({inventory_id, src_filename, map_sheet_id, orig_stand_id, ogc_fid}, {4,15,10,10,7}, {'x','x','x','0','0'}, '-', 'TRUE', 'TRUE')",Concatenates five attributes to create CAS_ID,TRUE
2,INVENTORY_ID,text,notEmpty(inventory_id),copyText(inventory_id),Copies source value,TRUE
3,ORIG_STAND_ID,text,"notNull(orig_stand_id);isInt(orig_stand_id);isGreaterThan(orig_stand_id,0)",copyText(orig_stand_id),Copies source value to ORIG_STAND_ID,TRUE
4,STAND_STRUCTURE,text,"fvi01_stand_structure_validation(stand_structure, species_1_layer1, species_2_layer1, species_3_layer1, species_1_layer2, species_2_layer2, species_3_layer2)","avi01_stand_structure_translation(stand_structure, species_1_layer1, species_2_layer1, species_3_layer1, species_1_layer2, species_2_layer2, species_3_layer2)","Validation returns NOT_APPLICABLE if row has no species info and is not Horizontal. Translation returns H or C for source Horizontal and Complex, S if one forest layer, M if two forest layers. Source stand structure counted NFL layers as forest layers, CASFRI does not. Uses avi translation helper function.",TRUE
5,NUM_OF_LAYERS,integer,true(),"fvi01_countOfNotNull({species_1_layer1, species_2_layer1, species_3_layer1, species_4_layer1}, {species_1_layer2, species_2_layer2, species_3_layer2, species_4_layer2}, {typeclas_layer1}, {typeclas_layer2}, 4, 'FALSE')","Counts number of layers based on the presence of a not null value for attributes representing each layer. Assumes LYR1 must have sp1 or sp2 or sp3 or sp4 attribute and LYR2 must have minsp1 or minsp2 or minsp3 or minsp4 attribute. Species values are not hierarchical so you can have sp2 with no sp1. Assumes valid NFL1 must have typeclas, NFL2 must have mintypecla. See attribute dependencies table for mappings. Custom helper function is a wrapper around countOfNotNull that first checks if the polygon-level type_class attributes have NFL values using matchList.",TRUE
6,MAP_SHEET_ID,text,false(),nothingText(),Attribute does not occur,TRUE
7,CASFRI_AREA,double precision,"geoIsValid(wkb_geometry, TRUE)",geoArea(wkb_geometry),Validates geometry then calculates area,TRUE
8,CASFRI_PERIMETER,double precision,"geoIsValid(wkb_geometry, TRUE)",geoPerimeter(wkb_geometry),Validates geometry then calculates perimeter,TRUE
9,SRC_INV_AREA,double precision,"notNull(src_inv_area);isNumeric(src_inv_area);isGreaterThan(src_inv_area,0)",copyDouble(src_inv_area),Copies source value to SRC_INV_AREA,TRUE
10,STAND_PHOTO_YEAR,integer,"notNull(stand_photo_year);isInt(stand_photo_year);isBetween(stand_photo_year, 1900, 2020)",copyInt(stand_photo_year),Copies source value to STAND_PHOTO_YEAR,TRUE
