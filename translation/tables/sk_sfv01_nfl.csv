rule_id,target_attribute,target_attribute_type,validation_rules,translation_rules,description,desc_uptodate_with_rules
1,CAS_ID,text,notEmpty(inventory_id);notNull(poly_id);notNull(src_filename);notNull(ogc_fid),"padConcat({inventory_id, src_filename, '', poly_id, ogc_fid}, {4,15,10,10,7}, {'x','x','x','0','0'}, '-', 'TRUE', 'TRUE')",Concatenates five attributes to create CAS_ID,TRUE
2,SOIL_MOIST_REG,text,"notNull(smr);notEmpty(smr);matchList(smr,{'D','F','M','MF','MM','MW','VD','VF','VM','VW','W'})","mapText(smr, {'D','F','M','MF','MM','MW','VD','VF','VM','VW','W'}, {'D','F','M','F','M','W','D','F','M','W','W'})",Maps soure value to SOIL_MOIST_REG,TRUE
3,STRUCTURE_PER,integer,true(),copyInt(100),No horizontal structure so structure percent is 100,TRUE
4,LAYER,integer,true(),"sfv01_countOfNotNull({dummy_l1_sp1}, {dummy_l2_sp1}, {dummy_l3_sp1}, {dummy_shrub1}, {dummy_herb1}, dummy_nvsl, dummy_aquatic_class, dummy_luc, dummy_transp_class, layer, 'FALSE')","Count layers up to max of 6. Layers are the forest species for layers 1, 2 and 3, the shrub layer, the herb layer, and a stand-level nfl layer that can be one of nvsl, aquatic_class, luc or transp_class. Custom function checks if nfl row is present then runs countOfNotNull. Only the first species is included for each forest layer as there are no cases where species 2, 3, 4, 5, or 6 are included without species 1. nvsl is the predominant non-veg cover type and can occur when there is forest info. 6 layers is therefore possible. max_rank_to_consider set to 'layer' because every nfl layer has its own row in the attribute_dependencies table.",TRUE
5,LAYER_RANK,integer,false(),nothingInt(),Attribute does not occur,TRUE
6,CROWN_CLOSURE_UPPER,integer,"notNull(shrub_herb_crown_closure);isInt(shrub_herb_crown_closure);isBetween(shrub_herb_crown_closure,0,100)",copyInt(shrub_herb_crown_closure),Maps source value to CROWN_CLOSURE_UPPER using lists of values,TRUE
7,CROWN_CLOSURE_LOWER,integer,"notNull(shrub_herb_crown_closure);isInt(shrub_herb_crown_closure);isBetween(shrub_herb_crown_closure,0,100)",copyInt(shrub_herb_crown_closure),Maps source value to CROWN_CLOSURE_LOWER using lists of values,TRUE
8,HEIGHT_UPPER,double precision,false(),nothingDouble(),No height info for shrub or herb,TRUE
9,HEIGHT_LOWER,double precision,false(),nothingDouble(),No height info for shrub or herb,TRUE
10,NAT_NON_VEG,text,"notNull({nvsl, aquatic_class});notEmpty({nvsl, aquatic_class});matchList({nvsl, aquatic_class},{'UK', 'CB', 'RK', 'SA', 'MS', 'GR', 'SB', 'WA', 'LA', 'RI', 'FL', 'SF', 'FP', 'ST', 'WASF', 'WALA', 'UKLA', 'WARI', 'WAFL', 'WAFP', 'WAST'})","mapText({nvsl, aquatic_class}, {'UK', 'CB', 'RK', 'SA', 'MS', 'GR', 'SB', 'WA', 'LA', 'RI', 'FL', 'SF', 'FP', 'ST', 'WASF', 'WALA', 'UKLA', 'WARI', 'WAFL', 'WAFP', 'WAST'}, {'OT', 'EX', 'RK', 'SA', 'EX', 'WS', 'WS', 'LA', 'LA', 'RI', 'FL', 'FL', 'BP', 'RI', 'FL', 'LA', 'LA', 'RI', 'FL', 'BP', 'RI'})",Concatenates values from 2 attributes and maps to NAT_NON_VEG using list of values. Usually only one of the attributes will occur per row in the source data.,TRUE
11,NON_FOR_ANTH,text,"notNull({luc, transp_class});notEmpty({luc, transp_class});matchList({luc, transp_class},{'ALA', 'POP', 'REC', 'PEX', 'GPI', 'BPI', 'MIS', 'ASA', 'NSA', 'OIS', 'OUS', 'AFS', 'CEM', 'WEH', 'TOW', 'RWC', 'RRC', 'TLC', 'PLC', 'MPC'})","mapText({luc, transp_class}, {'ALA', 'POP', 'REC', 'PEX', 'GPI', 'BPI', 'MIS', 'ASA', 'NSA', 'OIS', 'OUS', 'AFS', 'CEM', 'WEH', 'TOW', 'RWC', 'RRC', 'TLC', 'PLC', 'MPC'}, {'CL', 'SE', 'FA', 'IN', 'IN', 'BP', 'IN', 'IN', 'IN', 'IN', 'IN', 'FA' 'SE', 'FA', 'FA', 'FA', 'FA', 'FA', 'FA', 'FA'})",Concatenates values from 2 attributes and maps to NON_FOR_ANTH using list of values. Usually only one of the attributes will occur per row in the source data.,TRUE
12,NON_FOR_VEG,text,"notNull(dummy_shrub_herb);notEmpty(dummy_shrub_herb);matchList(dummy_shrub_herb,{'Ts','Al','Bh','Ma','Sa','Pc','Cr','Wi','Ls','Ro','Bi','Bu','Dw','Ra','Cu','Sn','Bb','Ci','Bl','La','Le','Be','Lc',Lb','He','Fe','Gr','Mo','Li','Av'})","mapText(dummy_shrub_herb, {'Ts','Al','Bh','Ma','Sa','Pc','Cr','Wi','Ls','Ro','Bi','Bu','Dw','Ra','Cu','Sn','Bb','Ci','Bl','La','Le','Be','Lc',Lb','He','Fe','Gr','Mo','Li','Av'}, {'TS','TS','TS','TS','TS','TS','TS','TS','LS','LS','LS','LS','LS','LS','LS','LS','LS','LS','LS','LS','LS','LS','LS','LS','HF','HF','HG','BR','BR','HF'})","Maps all shrub and herb values. Either shrub or herb source attribute will be mapped depending on the row being translated. Both could occur in the same source row so they are translated to different layers. Three shrub and herb species provided in the source, we only use shrub 1 and herb 1.",TRUE
