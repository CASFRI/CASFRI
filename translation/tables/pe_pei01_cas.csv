rule_id,target_attribute,target_attribute_type,validation_rules,translation_rules,description,desc_uptodate_with_rules
1,CAS_ID,text,notEmpty(inventory_id);notEmpty(src_filename);notNull(map_sheet_id);notNull(orig_stand_id);notNull(ogc_fid),"padConcat({inventory_id, src_filename, map_sheet_id, orig_stand_id, ogc_fid}, {4,15,10,10,7}, {'x','x','x','x','x'}, '-', TRUE, TRUE)",Concatenates five attributes to create CAS_ID,TRUE
2,INVENTORY_ID,text,notEmpty(inventory_id),copyText(inventory_id),Copies source value,TRUE
3,ORIG_STAND_ID,text,notNull(orig_stand_id),copyText(orig_stand_id),Copies source value,TRUE
4,STAND_STRUCTURE,text,"matchTable(species_1, 'translation', 'species_code_mapping', 'pe_species_codes', TRUE|NOT_APPLICABLE)",copyText('SINGLE_LAYERED'),"Only one LYR layer possible. If species info present, stand structure is SINGLE_LAYERED. spec2/3/4/5 is never present without spec1, so we can just test if spec1 has species info. PE01 repeats the NFL values in spec1 (not sure why) so we need to use check if the spec1 value is a valid species code by using the species lookup table.",TRUE
5,NUM_OF_LAYERS,integer,"pe_pei01_hasCountOfNotNull(species_1, species_2, species_3, species_4, species_5, landtype, 1, FALSE|-8886)","pe_pei01_countOfNotNull(species_1, species_2, species_3, species_4, species_5, landtype, 2)",Counts number of layers based on the presence of a valid species or NFL code. Custom function decides if NFL layer is present based on rules in NFL table. And if LYR layer is present based on a valid species code. Max number of layers is 2. Validation return UNKNOWN if num_of_layers is zero,TRUE
6,MAP_SHEET_ID,text,notNull(map_sheet_id);notEmpty(map_sheet_id),copyText(map_sheet_id),Copies source value to MAP_SHEET_ID,TRUE
7,CASFRI_AREA,double precision,"geoIsValid(wkb_geometry, TRUE|-8888)",geoArea(wkb_geometry),Validates geometry then calculates area,TRUE
8,CASFRI_PERIMETER,double precision,"geoIsValid(wkb_geometry, TRUE|-8888)",geoPerimeter(wkb_geometry),Validates geometry then calculates perimeter,TRUE
9,SRC_INV_AREA,double precision,"notNull(src_inv_area);isNumeric(src_inv_area);isGreaterThan(src_inv_area, 0, FALSE|-9999)",copyDouble(src_inv_area),Copies source value to SRC_INV_AREA. Return OUT_OF_RANGE for any zero values.,TRUE
10,STAND_PHOTO_YEAR,integer,true(),copyInt(1990),Year of photo is 1990 for entire inventory,TRUE
