rule_id,target_attribute,target_attribute_type,validation_rules,translation_rules,description,desc_uptodate_with_rules
1,CAS_ID,text,notEmpty(inventory_id);notNull(src_filename);notNull(map_id);notNull(feature_id);notNull(ogc_fid),"padConcat({inventory_id, src_filename, map_id, feature_id, ogc_fid}, {4,15,10,10,7}, {'x','x','x','0','0'}, '-', 'TRUE', 'TRUE')",Concatenates five attributes to create CAS_ID,TRUE
2,INVENTORY_ID,text,notEmpty(inventory_id),copyText(inventory_id),Copies source value,TRUE
3,ORIG_STAND_ID,text,"notNull(feature_id);isInt(feature_id);isGreaterThan(feature_id, 0)",copyText(feature_id),Copies source value to ORIG_STAND_ID,TRUE
4,STAND_STRUCTURE,text,true(),"ifElseCountOfNotNullText({species_cd_1, species_cd_2, species_cd_3, species_cd_4, species_cd_5, species_cd_6}, {dummy1, dummy2, dummy3, dummy4, dummy5, dummy6}, {land_cover_class_cd_1, bclcs_level_4, non_productive_descriptor_cd, non_veg_cover_type_1}, 3, 1, 'S', 'M')","Runs countOfNotNull. If one layer, returns S, if more than one layer returns M.",TRUE
5,NUM_OF_LAYERS,integer,true(),"countOfNotNull({species_cd_1, species_cd_2, species_cd_3, species_cd_4, species_cd_5, species_cd_6}, {dummy1, dummy2, dummy3, dummy4, dummy5, dummy6}, {land_cover_class_cd_1, bclcs_level_4, non_productive_descriptor_cd, non_veg_cover_type_1}, 3)","Counts number of layers based on the presence of a not null value for attributes representing each layer. Assumes valid LYR1 row must have species_cd_1 or species_cd_2 or species_cd_3 or species_cd_4 or species_cd_5 or species_cd_6, NFL1 must have land_cover_class_cd_1 or bclcs_level_4 or non_productive_descriptor_cd or non_veg_cover_type_1. Note that the validation function uses a more complex check of specific nfl values that must match up to specific inventory_standard_cd values. Not possible to do that complex check in this function so it's possible an nfl layer could be counted here but not receive an nfl value in the NFL table.",TRUE
6,MAP_SHEET_ID,text,notNull(map_id),copyText(map_id),Copies source value to MAP_SHEET_ID,TRUE
7,CASFRI_AREA,double precision,"geoIsValid(wkb_geometry, TRUE)",geoArea(wkb_geometry),Validates geometry then calculates area,TRUE
8,CASFRI_PERIMETER,double precision,"geoIsValid(wkb_geometry, TRUE)",geoPerimeter(wkb_geometry),Validates geometry then calculates perimeter,TRUE
9,SRC_INV_AREA,double precision,"notNull(geometry_area);isNumeric(geometry_area);isGreaterThan(geometry_area, 0)",copyDouble(geometry_area),Copies source value to SRC_INV_AREA,TRUE
10,STAND_PHOTO_YEAR,integer,"notNull(reference_year);isInt(reference_year);isBetween(reference_year, 1900, 2020)",copyInt(reference_year),Copies source value to STAND_PHOTO_YEAR,TRUE
