rule_id,target_attribute,target_attribute_type,validation_rules,translation_rules,description,desc_uptodate_with_rules
1,CAS_ID,text,notEmpty(inventory_id);notEmpty(src_filename);notNull(geocode_1_10);notNull(geocode_11_20),"padConcat({inventory_id, src_filename, geocode_1_10, geocode_11_20, ''}, {4,15,10,10,7}, {'x','x','x','x','x'}, '-', TRUE, TRUE)",Concatenates five attributes to create CAS_ID. Geocode_1_10 and geocode_11_20 are the original geocode string split into the first ten and second ten characters. Commas are replaced with periods for use in the cas_id.,TRUE
2,INVENTORY_ID,text,notEmpty(inventory_id),copyText(inventory_id),Copies source value,TRUE
3,ORIG_STAND_ID,text,notNull(orig_stand_id),copyText(orig_stand_id),Copies source value,TRUE
4,STAND_STRUCTURE,text,"notNull(cl_age|NOT_APPLICABLE);notEmpty(cl_age);matchTable(cl_age, 'translation', 'qc_standstructure_lookup', 'source_val')","lookupText(cl_age, 'translation', 'qc_standstructure_lookup', 'source_val', 'stand_structure')",Stand structure is based on the cl_age code and is copied form the lookup table,TRUE
5,NUM_OF_LAYERS,integer,"qc_hasCountOfNotNull(cl_age, co_ter, 1, FALSE|-8886)","qc_countOfNotNull(cl_age, co_ter, 3)","Uses the qc_standstructure_lookup table to find number of lyr layers, then tests to see if nfl is present and counts the total number of layers. Max number of layers is 3.",TRUE
6,MAP_SHEET_ID,text,"matchList(inventory_id, 'QC01'|NOT_APPLICABLE);notNull(mapsheet);notEmpty(mapsheet)",copyText(mapsheet),Attribute occurs only in QC01,TRUE
7,CASFRI_AREA,double precision,"geoIsValid(wkb_geometry, TRUE|-8888)",geoArea(wkb_geometry),Validates geometry then calculates area,TRUE
8,CASFRI_PERIMETER,double precision,"geoIsValid(wkb_geometry, TRUE|-8888)",geoPerimeter(wkb_geometry),Validates geometry then calculates perimeter,TRUE
9,SRC_INV_AREA,double precision,"notNull(src_inv_area);isNumeric(src_inv_area);isGreaterThan(src_inv_area, 0, FALSE)","qc_prg3_src_inv_area_translation(inventory_id, src_inv_area)","For QC01, converts from m2 to ha. For QC02 and QC03, copy value. Return OUT_OF_RANGE for any zero values.",TRUE
10,STAND_PHOTO_YEAR,integer,"notNull(stand_photo_year);isInt(stand_photo_year);isGreaterThan(stand_photo_year, 0, FALSE|-8888);isBetween(stand_photo_year, 1900, 2020)",copyInt(stand_photo_year),Copies source value to STAND_PHOTO_YEAR. Note that year of photography is unknown in the original inventory. The inventory uses photo_interpretation_year which is always 1-3 years within the original photo_year. ,TRUE
