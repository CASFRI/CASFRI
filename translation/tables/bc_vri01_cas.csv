rule_id,target_attribute,target_attribute_type,validation_rules,translation_rules,description,desc_uptodate_with_rules
1,CAS_ID,text,notEmpty(inventory_id);notNull(src_filename);notNull(map_id);notNull(feature_id);notNull(ogc_fid),"padConcat({inventory_id, src_filename, map_id, feature_id, ogc_fid}, {4,15,10,10,7}, {'x','x','x','0','0'}, '-', 'TRUE', 'TRUE')",Concatenates five attributes to create CAS_ID,TRUE
2,INVENTORY_ID,text,notEmpty(inventory_id),copyText(inventory_id),Copies source value,TRUE
3,ORIG_STAND_ID,text,"notNull(feature_id);isInt(feature_id);isGreaterThan(feature_id, 0)",copyText(feature_id),Copies source value to ORIG_STAND_ID,TRUE
4,STAND_STRUCTURE,text,"hasCountOfNotNull({species_cd_1, species_cd_2, species_cd_3, species_cd_4, species_cd_5, species_cd_6}, {dummy1, dummy2, dummy3, dummy4, dummy5, dummy6}, 1, 'FALSE'|NOT_APPLICABLE)","ifElseCountOfNotNullText({species_cd_1, species_cd_2, species_cd_3, species_cd_4, species_cd_5, species_cd_6}, {dummy1, dummy2, dummy3, dummy4, dummy5, dummy6}, 2, 1, 'S', 'M')","Validation catches rows with no forest info and returns NOT_APPLICABLE. Translation runs countOfNotNull for the two forest layers. If one layer, returns S, if two layers returns M.",TRUE
5,NUM_OF_LAYERS,integer,true(),"vri01_countOfNotNull({species_cd_1, species_cd_2, species_cd_3, species_cd_4, species_cd_5, species_cd_6}, {dummy1, dummy2, dummy3, dummy4, dummy5, dummy6}, inventory_standard_cd, land_cover_class_cd_1, bclcs_level_4, non_productive_descriptor_cd, non_veg_cover_type_1, 3, 'FALSE')","Custom function counts number of layers based on the presence of a not null value for attributes representing each layer. Assumes valid LYR1 row must have species_cd_1 or species_cd_2 or species_cd_3 or species_cd_4 or species_cd_5 or species_cd_6. Layer 2 only available for BC10, in BC08 the dummy variables get mapped to NULL. For the NFL attributes, presence of not null values is not sufficient. The custom function runs the NFL functions vri01_non_for_veg_validation, vri01_nat_non_veg_validation and vri01_non_for_anth_validation to see if there is an nfl value present based on the input values. If there is, one layer is added to the count.",TRUE
6,MAP_SHEET_ID,text,notNull(map_id),copyText(map_id),Copies source value to MAP_SHEET_ID,TRUE
7,CASFRI_AREA,double precision,"geoIsValid(wkb_geometry, TRUE)",geoArea(wkb_geometry),Validates geometry then calculates area,TRUE
8,CASFRI_PERIMETER,double precision,"geoIsValid(wkb_geometry, TRUE)",geoPerimeter(wkb_geometry),Validates geometry then calculates perimeter,TRUE
9,SRC_INV_AREA,double precision,"notNull(geometry_area);isNumeric(geometry_area);isGreaterThan(geometry_area, 0)",copyDouble(geometry_area),Copies source value to SRC_INV_AREA,TRUE
10,STAND_PHOTO_YEAR,integer,"notNull(reference_year);isInt(reference_year);isBetween(reference_year, 1900, 2020)",copyInt(reference_year),Copies source value to STAND_PHOTO_YEAR,TRUE
