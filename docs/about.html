<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>CASFRI</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">



<div id="casfriHeader" class="alwaysShrunk">
  <div class="innards bandContent">
    <div>
      <div class="casfri"><a href="index.html"><div class="logo"></div></a></div>
    </div>

    <div id="menu">
      <div id="menuToggler"></div>
      <div id="menuItems">
        <a class="menuItem" href="about.html">About</a>
        <a class="menuItem" href="demo.html">Demo</a>
        <a class="menuItem" href="projects.html">Projects</a>
        <a class="menuItem" href="data.html">Data</a>
        <a class="menuItem gitHub" target="_blank" rel="noopener noreferrer" href="https://github.com/edwardsmarc/CASFRI"></a>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
$(".main-container").removeClass("main-container").removeClass("container-fluid").addClass("footerPushDown");
</script>


<div id="pageContent" class="standardPadding">
  <div class="articleBandContent">

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">CASFRI</h1>

</div>


<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>Digital Forest Resource Inventories (FRIs) are compiled by provincial and territorial governments and are key inputs into forest management planning. FRI datasets consist of stand maps interpreted from aerial photography at scales ranging from 1:10,000 to 1:40,000. The stand maps estimate the location, extent, condition, composition, and structure of the forest resource. Many FRIs also include information on disturbances such as fire, windthrow and insects, non-forest components such as understory vegetation, non-vegetated land and anthropogenic land use, and in some cases wetland categorizations. Each jurisdiction has developed its own procedures and standards for forest inventories making it difficult to assemble datasets across multiple jurisdictions.</p>
<p>The goal of the CASFRI project is to pass each FRI dataset from the various jurisdictions across Canada through a <a target="_blank" rel="noopener noreferrer" href="https://github.com/edwardsmarc/PostgreSQL-Table-Translation-Framework">translation engine</a>. The translation engine converts each dataset into the CASFRI specifications and merges the datasets together to create a continuous map of FRI polygons. For example, the image below represents a white spruce forest and a fire crossing between two jurisdictions on either side of a river. Each jurisdiction records the species content of the forest and the year and type of disturbance using different formats. The job of CASFRI is to translate each of these into a common format.</p>
<center>
<img src="images/specs_example.png" title="fig:" alt="Specs figure" style="width:75.0%" />
</center>
<p><br></p>
<p>All CASFRI data are inherantly spatial, because all attributes are directly associated with a specific polygon. No sample plots or point data are processed by CASFRI. CASFRI therefore produces continuous maps of FRI polygons matching the extent of the input data. CASFRI does not model or interpolate data, the CASFRI philosophy is to translate the source data into the CASFRI standard as directly and transparently as possible. Users interested in modelling, projecting or interpolating data can use the CASFRI database as a starting point for their analysis, or they can modify the CASFRI workflow to create their own standardized forest inventory conforming to their own specifications.</p>
<p>CASFRI ensures reliable and robust data by applying validation procedures at multiple stages in the workflow. Input data are validated before any translation is attempted. The translation rules themselves are then validated prior to data translation. The final CASFRI database is validated to ensure all data conform to the CASFRI specifications. Any invalid data is reported using the CASFRI <a target="_blank" rel="noopener noreferrer" href="https://github.com/edwardsmarc/CASFRI/tree/master/documentation/specifications#Error_codes">error code syntax</a> which informs users on the type of invalidation that occurred.</p>
<p><br></p>
</div>
<div id="casfri-specifications" class="section level1">
<h1>CASFRI specifications</h1>
<p>The <a target="_blank" rel="noopener noreferrer" href="https://github.com/edwardsmarc/CASFRI/tree/master/documentation/specifications">CASFRI specifications</a> define the format of the data stored in CASFRI. The goal of these specifications is to represent all the various data formats from jurisdictions across Canada. CASFRI stores data in seven different tables:</p>
<center>
<img src="images/casfri_tables.png" style="width:100.0%" />
</center>
<p>Each table is described in detail in the <a target="_blank" rel="noopener noreferrer" href="https://github.com/edwardsmarc/CASFRI/tree/master/documentation/specifications">CASFRI specifications</a>. <br> <br> <br></p>
</div>
<div id="building-casfri" class="section level1">
<h1>Building CASFRI</h1>
<p>There are three main steps to build the CASFRI dataset. The first is <strong>Conversion</strong> where the source FRI data are loaded into the database. Once inside the database the source FRI is <strong>Translated</strong> to the CASFRI specifications. Finally, once all FRIs have been translated they are combined to create the historical dataset in the <strong>Temporalization</strong> step.</p>
<center>
<img src="images/workflow.png" title="fig:" alt="Workflow figure" style="width:75.0%" />
</center>
<p><img src="images/conversion.png" height="50" /><br> CASFRI uses an Extract, Load, Transform (ELT) workflow where source data is first loaded into the PostgreSQL database, then translated inside the database. The first step in building CASFRI is therefore to load the source FRI data into the PostgreSQL database using a loading script. Each source FRI dataset has its own <a target="_blank" rel="noopener noreferrer" href="https://github.com/edwardsmarc/CASFRI/tree/master/conversion/sh">loading script</a>. Loading is done using GDAL, supported formats are ESRI geodatabases, shapefiles and Arc/Info Binary Coverages.</p>
<p><img src="images/translation.png" height="50" /><br> After the conversion step, the source inventories are stored inside the PostgreSQL database, but they are still formatted to their original specifications. The next step is to translate them into the CASFRI specifications. For this we use the <a target="_blank" rel="noopener noreferrer" href="https://github.com/edwardsmarc/PostgreSQL-Table-Translation-Framework">PostgreSQL table translation framework</a>. This translation engine allows the source data to be translated into the CASFRI attributes satisfying the CASFRI specifications. The translation rules are defined in a simple csv table (one for each CASFRI table) using a set of helper functions to validate and translate the source values into the CASFRI values. The csv <a target="_blank" rel="noopener noreferrer" href="https://github.com/edwardsmarc/CASFRI/tree/master/translation/tables">translation tables</a> form an important piece of documentation because in addition to providing the translation engine with the rules and parameters for each translation, they also serve to document and describe the translation from source value to CASFRI value for every CASFRI attribute and every source dataset. The translation tables also define the specification of the final CASFRI database and are themselves validated by the translation engine before any translations are attempted. Multiple source datasets can be translated using the same translation table if they conform to the same standard. At the end of the translation step, the PostgreSQL database contains every valid source polygon, translated into the CASFRI specifications.</p>
<p><img src="images/temporalization.png" height="50" /><br> The final step is to use the translated data to build the historical database. This process is described in detail on the <a target="_blank" rel="noopener noreferrer" href="https://github.com/edwardsmarc/CASFRI">CASFRI github page</a> and involves intersecting all overlapping polygons, selecting the best data when polygons overlap in time, and assigning a valid date range for all resulting polygons. The final historical database can then be queried to find the most relavent FRI attributes for any given time, at any requested location. The historical database does not project or interpolate forest attributes through time, it simply returns the best available FRI information for a given year. It is up to the user to do any interpolation or modelling on the output data. <br> <br> <br></p>
</div>
<div id="how-to-cite-the-project" class="section level1">
<h1>How to cite the project</h1>
</div>

</div> <!-- articleBandContent -->
</div> <!-- pageContent -->

<div id="casfriFooter" class="band full">
  <div class="bandContent">
    <div id="developedBy" style="font-size:18px;">Developed by Pierre Racine, Marc Edwards,<br>Melina Houle, Pierre Vernier and Steve Cumming.
      <br>
      <br>
      <div style="font-size:12px">Icons made by <a target="_blank" rel="noopener noreferrer" href="https://www.freepik.com" title="Freepik">Freepik</a> from <a target="_blank" rel="noopener noreferrer" href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a>
      </div>
    </div>
    <div id="logos">
      <a href="https://github.com/edwardsmarc/CASFRI" target="_blank" rel="noopener noreferrer" class="footerLogo gitHub"></a>
    </div>
  </div>
  
</div>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->



</body>
</html>
