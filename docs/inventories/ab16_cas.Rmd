---  
title: "CAS Attributes"
output:  
  html_document:  
    code_folding: hide
    toc: true
    toc_float:
      collapsed: false
    css: styles.css
---  

<br>

# What's new

  * First version created (2019-05-23)

<br>

# Overview

<br>

# Attributes

## cas_id

The cas_id attributes is used in 5 of the 6 CASFRI attribute tables and is only described here. This inventory has the following variations:

  * Header identifier: "AB16"
  * Source file name: "xxxxxxxxxCANFOR"
  * Name of mapsheet: "x" + "T0" + township + "R0" + range + "M" + meridian
  * Object identifier: forest_id_2

## orig_stand_id {.tabset}

  * Double check that this is forest_id_2; also, do we need to prepend zeros?

```{r echo=TRUE, message=FALSE, warning=FALSE}  
x = mutate(x, orig_stand_id = forest_id_2)
```

### RAWFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["forest_id_2"], graph.col=FALSE, max.distinct.values=99)
```

### CASFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["orig_stand_id"], graph.col=FALSE, max.distinct.values=99)
```

## stand_structure {.tabset}

  * This seems wrong, does not match CAS_04 output. Check the Perl code.

```{r echo=TRUE, message=FALSE, warning=FALSE}
fri = c(" 0","0","C4","C5","M","M0","MO")
cas = c("-9999","-9999","4","5","-9999","-9999","-9999")
x = mutate(x, stand_structure = if_else(is.na(std_struct), as.integer(-8888), as.integer(mapvalues(std_struct, fri, cas))))
```

### RAWFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["std_struct"], graph.col=FALSE, max.distinct.values=99)
```

### CASFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["stand_structure"], graph.col=FALSE, max.distinct.values=99)
```

## num_of_layers {.tabset}

  * In the CAS_04, there are 2 values: 1 and 2; however I can't find the corresponding FRI attribute.

```{r echo=TRUE, message=FALSE, warning=FALSE}  
```

### RAWFRI

### CASFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
#dfSummary(x["num_of_layers"], graph.col=FALSE, max.distinct.values=99)
```

## identification_id {.tabset}

  * The identification_id takes a value of 16.

```{r echo=TRUE, message=FALSE, warning=FALSE}
x = mutate(x, identification_id = 16)
```

### RAWFRI

### CASFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["identification_id"], graph.col=FALSE, max.distinct.values=99)
```

## map_sheet_id {.tabset}

```{r echo=TRUE, message=FALSE, warning=FALSE}  
x = mutate(x, map_sheet_id = src_filename)
```

### RAWFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["src_filename"], graph.col=FALSE, max.distinct.values=10)
```

### CASFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["map_sheet_id"], graph.col=FALSE, max.distinct.values=10)
```

## gis_area {.tabset}

```{r echo=TRUE, message=FALSE, warning=FALSE}  
x = mutate(x, gis_area= round(area/10000,1))
```

### RAWFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["area"], graph.col=FALSE, max.distinct.values=99)
```

### CASFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["gis_area"], graph.col=FALSE, max.distinct.values=99)
```

## gis_perimeter {.tabset}

```{r echo=TRUE, message=FALSE, warning=FALSE}  
x = mutate(x, gis_perimeter = round(perimeter,0))
```

### RAWFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["perimeter"], graph.col=FALSE, max.distinct.values=99)
```

### CASFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["gis_perimeter"], graph.col=FALSE, max.distinct.values=99)
```

## inventory_area {.tabset}

  * is this the same as GIS_AREA?

```{r echo=TRUE, message=FALSE, warning=FALSE}  
x = mutate(x, inventory_area = round(area/10000,1))
```

### RAWFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["area"], graph.col=FALSE, max.distinct.values=99)
```

### CASFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["inventory_area"], graph.col=FALSE, max.distinct.values=99)
```

## photo_year {.tabset}

```{r echo=TRUE, message=FALSE, warning=FALSE}  
```

### RAWFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
#dfSummary(x[""], graph.col=FALSE, max.distinct.values=99)
```

### CASFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
#dfSummary(x["photo_year"], graph.col=FALSE, max.distinct.values=99)
```
