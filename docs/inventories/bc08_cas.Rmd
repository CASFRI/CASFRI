---  
title: "CAS Attributes"
output:  
  html_document:  
    code_folding: hide
    toc: true
    toc_float:
      collapsed: false
    css: styles.css
---  

<br>

# What's new

May 14, 2019

  * CAS attributes are ready to reviewed.

<br>

# Overview

  * See comments under individual attribute heading

<br>

# Attributes

## orig_stand_id {.tabset}

  - feature_id [do we need an isUnique() helper function?]

```{r echo=TRUE, message=FALSE, warning=FALSE}  
x = mutate(x, orig_stand_id = feature_id)
```

### RAWFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["feature_id"], graph.col=FALSE, max.distinct.values=99)
```

### CASFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["orig_stand_id"], graph.col=FALSE, max.distinct.values=99)
```

## stand_structure {.tabset}

The attribute num_of_layers is not created from an FRI attribute:

  * assigned a value of "S"

```{r echo=TRUE, message=FALSE, warning=FALSE}  
x = mutate(x, stand_structure = "S")
```

### RAWFRI

### CASFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["stand_structure"], graph.col=FALSE, max.distinct.values=99)
```

## num_of_layers {.tabset}

The attribute num_of_layers is not created from an FRI attribute:

  * assigned a value of 1

```{r echo=TRUE, message=FALSE, warning=FALSE}  
x = mutate(x, num_of_layers = 1)
```

### RAWFRI

### CASFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["num_of_layers"], graph.col=FALSE, max.distinct.values=99)
```

## identification_id {.tabset}

The attribute identification_id is created from the inventory_standard_cd:

  * mapvalues(inventory_standard_cd, c("F","V","I","L"), c(4,5,6,0))
  * the value "L" is not defined in CASFRI and has been assigned a value of 0 for now

```{r echo=TRUE, message=FALSE, warning=FALSE}
friList = c("F","V","I","L")
casList = c(4,5,6,0)
x = mutate(x, identification_id = mapvalues(inventory_standard_cd, friList, casList))
```

### RAWFRI

### CASFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["identification_id"], graph.col=FALSE, max.distinct.values=99)
```

## map_sheet_id {.tabset}

  * do we need an isLength() helper function?; isText()?

```{r echo=TRUE, message=FALSE, warning=FALSE}  
x = mutate(x, map_sheet_id = map_id)
```

### RAWFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["map_id"], graph.col=FALSE, max.distinct.values=10)
```

### CASFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["map_sheet_id"], graph.col=FALSE, max.distinct.values=10)
```

## gis_area {.tabset}

```{r echo=TRUE, message=FALSE, warning=FALSE}  
x = mutate(x, gis_area= round(shape_area/10000,1))
```

### RAWFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["shape_area"], graph.col=FALSE, max.distinct.values=99)
```

### CASFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["gis_area"], graph.col=FALSE, max.distinct.values=99)
```

## gis_perimeter {.tabset}

```{r echo=TRUE, message=FALSE, warning=FALSE}  
x = mutate(x, gis_perimeter = round(shape_length,0))
```

### RAWFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["shape_length"], graph.col=FALSE, max.distinct.values=99)
```

### CASFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["gis_perimeter"], graph.col=FALSE, max.distinct.values=99)
```

## inventory_area {.tabset}

  * is this the same as GIS_AREA?

```{r echo=TRUE, message=FALSE, warning=FALSE}  
x = mutate(x, inventory_area = round(shape_area/10000,1))
```

### RAWFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["shape_area"], graph.col=FALSE, max.distinct.values=99)
```

### CASFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["inventory_area"], graph.col=FALSE, max.distinct.values=99)
```

## photo_year {.tabset}

  * Seems straight forward for VRI
  * See Perl code for FIP inventories (reference_year or substr of reference_date)

```{r echo=TRUE, message=FALSE, warning=FALSE}  
x = mutate(x, photo_year=reference_year)
```

### RAWFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["reference_year"], graph.col=FALSE, max.distinct.values=99)
```

### CASFRI

```{r echo=FALSE, message=FALSE, warning=FALSE}  
dfSummary(x["photo_year"], graph.col=FALSE, max.distinct.values=99)
```
